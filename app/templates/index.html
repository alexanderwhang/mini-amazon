{% extends "base.html" %}

{% block content %}
<br><br>
<h2>Products for sale:</h2>
<table class='table table-hover table-bordered container'>
  <thead class="thead-dark">
	<tr>
		<th scope="col">Product Name</th>
		<th scope="col">Price</th>
		<th scope="col">Quantity</th>
	</tr>
  </thead>
  <tbody>
    {% for product in all_products%}
    <tr>
		<th>{{product.name}}</th>
		<th>{{product.price}}</th>
		<th>{{product.quantity}}</th>
	</tr>
    {% endfor %}
  </tbody>
</table>

<br><br>

{% if current_user.is_authenticated %}
<h2>Purchase History:</h2>
<table class='table table-hover table-bordered container'>
  <thead class="thead-dark">
	<tr>
		<th scope="col">Order ID</th>
		<th scope="col">Product Name</th>
		<th scope="col">Price</th>
		<th scope="col">Quantity</th>
		<th scope="col">Total Price</th>
		<th scope="col">Fulfillment Status</th>
	</tr>
  </thead>
  <tbody>
    {% for purchase in purchase_history %}
    <tr>
		<th>{{purchase.order_id}}</th>
		<th>{{purchase.product_name}}</th>
		<th>{{purchase.product_price}}</th>
		<th>{{purchase.quantity}}</th>
		<th>{{purchase.total_price}}</th>
		<th>{{purchase.fulfillment_status}}</th>
	</tr>
    {% endfor %}
  </tbody>
</table>

<!-- Aaric's Product Reviews List -->
<h2>Product Reviews:</h2>
<table class='table table-hover table-bordered container'>
  <thead class="thead-dark">
	<tr>
		<th scope="col">Product ID</th>
		<th scope="col">Review Time</th>
		<th scope="col">Review Content</th>
	</tr>
  </thead>
  <tbody>
    {% for review in all_user_reviews %}
    <tr>
		<th>{{review.pid}}</th>
		<th>{{review.review_time}}</th>
		<th>{{review.review_content}}</th>
	</tr>
    {% endfor %}
  </tbody>
</table>

{% else %}
<p><a href="{{ url_for('users.login') }}">Log in</a> to see your purchase history!</p>
{% endif %}

{% endblock %}
